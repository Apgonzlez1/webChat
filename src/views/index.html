<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Web Chat</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">



  <!-- Tu CSS personalizado -->
  <link rel="stylesheet" href="css/style.css" />

 
</head>

<body class="bg-dark text-white d-flex align-items-center justify-content-center vh-100">

  <div class="card text-white bg-secondary" style="width: 100%; max-width: 900px; height: 90vh;">
    <div class="card-header bg-success text-white text-center">
      <h3>💬 Web Chat</h3>
    </div>
    <div id="user-list">
      <h6>Usuarios Conectados</h6>
      <ul id="users"></ul>
    </div>

    <div class="card-body d-flex flex-column p-0 position-relative h-100">
      <!-- Zona principal: usuarios + mensajes -->
      <div class="d-flex flex-grow-1 overflow-hidden">
        
        <!-- Lista de usuarios -->
        <!-- Lista de usuarios conectados -->
        <div id="user-list" class="user-panel shadow-sm">
          <div class="panel-header">
            <strong>🟢 Conectados</strong>
          </div>
          <ul id="users" class="user-list list-unstyled mb-0"></ul>
        </div>


        <!-- Mensajes -->
        <div id="all-messages" class="flex-grow-1 overflow-auto px-3 py-2">
          <!-- Mensajes se insertan aquí -->
        </div>
      </div>

      <!-- Zona inferior de input -->
      <div class="input-container p-3 border-top bg-dark">
        <div class="chat-input-group d-flex align-items-center gap-2">
          <button type="button" class="btn btn-outline-light emoji-btn" onclick="toggleEmojiPicker()">😄</button>
          <input type="text" id="message" class="form-control" placeholder="Escribe un mensaje..." autocomplete="off" />
          <button id="send-message" type="button" class="btn whatsapp-btn">Enviar</button>
        </div>

        <!-- Selector de emojis -->
        <div id="emojiPicker" aria-label="Selector de emojis" role="list">
          <span onclick="addEmoji('😀')">😀</span>
          <span onclick="addEmoji('😂')">😂</span>
          <span onclick="addEmoji('😍')">😍</span>
          <span onclick="addEmoji('😎')">😎</span>
          <span onclick="addEmoji('😭')">😭</span>
          <span onclick="addEmoji('🤔')">🤔</span>
          <span onclick="addEmoji('👍')">👍</span>
          <span onclick="addEmoji('❤️')">❤️</span>
        </div>
      </div>
    </div>
  </div>

 


  <!-- Emoji Picker -->
  

  <!-- Scripts -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="js/script.js"></script>
  <script>
    function toggleEmojiPicker() {
      const picker = document.getElementById("emojiPicker");
      picker.style.display = (picker.style.display === "block") ? "none" : "block";
    }

    function addEmoji(emoji) {
      const input = document.getElementById("message");
      input.value += emoji;
      input.focus();
    }

    // Cierra el emoji picker si se hace clic fuera de él
    document.addEventListener("click", function (event) {
      const picker = document.getElementById("emojiPicker");
      const emojiBtn = document.querySelector("button.btn-outline-light");

      if (!picker.contains(event.target) && event.target !== emojiBtn) {
        picker.style.display = "none";
      }
    });

    
  </script>
</body>
</html>